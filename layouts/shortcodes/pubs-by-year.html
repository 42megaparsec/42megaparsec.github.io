{{- $pubs := sort .Site.Data.publications "year" "desc" -}}
{{- $years := slice -}}

{{- range $pubs -}}
  {{- if not (in $years .year) -}}
    {{- $years = $years | append .year -}}
  {{- end -}}
{{- end -}}

{{- range $years -}}
  <h2 class="pub-subtitle">{{ . }}</h2>
  {{- range where $pubs "year" . -}}
    {{- partial "pub_item.html" . -}}
  {{- end -}}
{{- end -}}
